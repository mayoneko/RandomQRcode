<html>
<head>
    <title>QRCODE</title>

    <style type="text/css">
    </style>


    <script type="text/javascript" src="grid.js"></script>
    <script type="text/javascript" src="version.js"></script>
    <script type="text/javascript" src="detector.js"></script>
    <script type="text/javascript" src="formatinf.js"></script>
    <script type="text/javascript" src="errorlevel.js"></script>
    <script type="text/javascript" src="bitmat.js"></script>
    <script type="text/javascript" src="datablock.js"></script>
    <script type="text/javascript" src="bmparser.js"></script>
    <script type="text/javascript" src="datamask.js"></script>
    <script type="text/javascript" src="rsdecoder.js"></script>
    <script type="text/javascript" src="gf256poly.js"></script>
    <script type="text/javascript" src="gf256.js"></script>
    <script type="text/javascript" src="decoder.js"></script>
    <script type="text/javascript" src="qrcode.js"></script>
    <script type="text/javascript" src="findpat.js"></script>
    <script type="text/javascript" src="alignpat.js"></script>
    <script type="text/javascript" src="databr.js"></script>
    <script type="text/javascript" src="../libraries/p5.js"></script>
    <script type="text/javascript" src="../libraries/p5.dom.js"></script>
    <script type="text/javascript">
        var canvas;

        function setup() {
            canvas = createCanvas(660, 660);
            canvas.id("qr-canvas");
            background(255);
            generate();
            try {
                text(qrcode.decode(), width / 2, height / 2);
                console.log(qrcode.decode());
            } catch (e) {

            }
        }

        function draw(){
            background(255);
            generate();
            try {
                text(qrcode.decode(), width / 2, height / 2);
                console.log(qrcode.decode());
                save(qrcode.decode()+".png");
            } catch (e) {
                console.log("notQR");
            }

        }


        function generate() {
            noStroke();
            fill(0);
            for (var i = 4; i < 29; i++) {
                for (var j = 4; j < 29; j++) {
                    if (random(0, 2) > 1) {
                        rect(i*width/33, j*width/33, width / 33, width / 33);
                    }
                }
            }
            fill(255);
            rect(width / 33 * 4, width / 33 * 4, width / 33 * 8, width / 33 * 8);
            fill(0);
            rect(width / 33 * 4, width / 33 * 4, width / 33 * 7, width / 33 * 7);
            fill(255);
            rect(width / 33 * 5, width / 33 * 5, width / 33 * 5, width / 33 * 5);
            fill(0);
            rect(width / 33 * 6, width / 33 * 6, width / 33 * 3, width / 33 * 3);
            fill(255);
            rect(width / 33 * 29, width / 33 * 4, -width / 33 * 8, width / 33 * 8);
            fill(0);
            rect(width / 33 * 29, width / 33 * 4, -width / 33 * 7, width / 33 * 7);
            fill(255);
            rect(width / 33 * 28, width / 33 * 5, -width / 33 * 5, width / 33 * 5);
            fill(0);
            rect(width / 33 * 27, width / 33 * 6, -width / 33 * 3, width / 33 * 3);
            fill(255);
            rect(width / 33 * 4, width / 33 * 29, width / 33 * 8, -width / 33 * 8);
            fill(0);
            rect(width / 33 * 4, width / 33 * 29, width / 33 * 7, -width / 33 * 7);
            fill(255);
            rect(width / 33 * 5, width / 33 * 28, width / 33 * 5, -width / 33 * 5);
            fill(0);
            rect(width / 33 * 6, width / 33 * 27, width / 33 * 3, -width / 33 * 3);
            fill(0);
            rect(width / 33 * 20, width / 33 * 20, width / 33 * 5, width / 33 * 5);
            fill(255);
            rect(width / 33 * 21, width / 33 * 21, width / 33 * 3, width / 33 * 3);
            fill(0);
            rect(width / 33 * 22, width / 33 * 22, width / 33, width / 33);
            fill(255);
            rect(width / 33 * 11, width / 33 * 10, width / 33 * 11, width / 33);
            fill(0);
            for (var i = 0; i < 5; i++) {
                rect(width / 33 * (12 + i * 2), width / 33 * 10, width / 33, width / 33);
            }
            fill(255);
            rect(width / 33 * 10, width / 33 * 11, width / 33, width / 33 * 11);
            fill(0);
            for (var i = 0; i < 5; i++) {
                rect(width / 33 * 10, width / 33 * (12 + i * 2), width / 33, width / 33);
            }

        }
    </script>

</head>

<body>
</body>

</html>